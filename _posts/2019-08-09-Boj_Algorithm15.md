---
layout: post
title: (백준 알고리즘_1744) 수 묶기
tags:
  - 알고리즘(BOJ)
---

<br>

### 문제

---

길이가 N인 수열이 주어졌을 때, 그 수열의 합을 구하려고 한다. 하지만, 그냥 그 수열의 합을 모두 더해서 구하는 것이 아니라, 수열의 두 수를 묶으려고 한다. 어떤 수를 묶으려고 할 때, 위치에 상관없이 묶을 수 있다. 하지만, 같은 위치에 있는 수(자기 자신)를 묶는 것은 불가능하다. 그리고 어떤 수를 묶게 되면, 수열의 합을 구할 때 묶은 수는 서로 곱한 후에 더한다.

예를 들면, 어떤 수열이 {0, 1, 2, 4, 3, 5}일 때, 그냥 이 수열의 합을 구하면 0+1+2+4+3+5 = 15이다. 하지만, 2와 3을 묶고, 4와 5를 묶게 되면, 0+1+(2*3)+(4*5) = 27이 되어 최대가 된다.

수열의 모든 수는 단 한번만 묶거나, 아니면 묶지 않아야한다.

수열이 주어졌을 때, 수열의 각 수를 적절히 묶었을 때, 그 합이 최대가 되게 하는 프로그램을 작성하시오.

<br>

### 입력

---

첫째 줄에 수열의 크기 N이 주어진다. N은 10,000보다 작다. 둘째 줄부터 N개의 줄에, 수열의 각 수가 주어진다. 수열의 수는 -10,000보다 크거나 같고, 10,000보다 작거나 같은 정수이다.

<br>

### 출력

---

수를 합이 최대가 나오게 묶었을 때 합을 출력한다. 정답은 항상 231보다 작다.

<br>

### 예제 입력과 출력

---

```java
//입력
4
-1
2
1
3
```

```java
//출력
6
```

<br>

### 풀이

---

수열의 각 수를 적절히 묶었을 때, 그 합이 최대가 되도록 해야한다. 

먼저 수열을 오름차순으로 정렬. 수열이 {3, 0, 4, -1, 2, -5, -10, 1} 라면 => 정렬 후 `{-10, -5, -1, 0, 1, 2, 3, 4} `

- 음수값 처리방법 (index=0부터 시작)

- 최대 합을 만들기 위해서는 음수값을 최대한 작게 만들거나 양수 또는 0으로 바뀌도록 수를 적절히 묶는 방법이 있다.

  - 현재 인덱스 다음값이 존재하고 (index+1<n), 다음값이 음수이거나 0인 경우 : 두 수를 곱해서 더하고 index를 두칸 이동 (index+=2)
  - 현재 인덱스 다음값이 존재하고 (index+1<n), 다음값이 양수인 경우 : 현재 값을 그대로 더하기 (음수와 양수를 곱하면 더 크거나 같은 음수 값이 나와서 최대 합이 더 작아짐)
  - 현재 인덱스 다음값이 존재하지 않는 경우(index+1>=n) : 현재 값을 그대로 더하기
  - `(-10 * -5) + (-1 * 0) = 50 `

  ```java
  int i=0;
  while(i<n && arr[i]<0) {
    if(i+1<n && (arr[i+1]<0 || arr[i+1]==0)) {
      sum+=arr[i]*arr[i+1];
      i+=2;
    }else {
      sum+=arr[i];
      i++;
    }
  }
  ```

- 양수값 처리방법 (index=n-1부터 시작)

- 최대 합을 만들기 위해서는 큰 양수들끼리 값을 곱해서 더해준다(값이 더 커지게). 단, 예외적으로 1을 곱하면 값이 그대로이기 때문에 곱해서 더하는 것보다 그냥 1을 더하는게 더 이득 (2*1=2 인데 2+1=3)

  - 현재 인덱스 이전값이 존재하고 (index-1>=0), 이전값이 1이 아닌 양수일 경우 : 두 수를 곱해서 더하고 index를 두칸 이동 (index-=2)
  - 현재 인덱스 이전값이 존재하고 (index-1>=0), 이전값이 1이거나, 0 또는 음수인 경우 : 현재 값을 그대로 더하기
  - 현재 인덱스 이전값이 존재하지 않는 경우 (index-1<0) : 현재 값을 그대로 더하기
  - `(3*4) + 2 + 1= 15`

  ```java
  i = n-1;
  while(i>=0 && arr[i]>0) {
    if(i-1>=0 && arr[i-1]>0 && arr[i-1]!=1) {
      sum += arr[i]*arr[i-1];
      i-=2;
    }else {
      sum+=arr[i];
      i--;
    }
  }
  ```

<br>

전체코드

```java
public class Boj1744 {

	public static void main(String[] args) throws NumberFormatException, IOException {

    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		int n = Integer.parseInt(br.readLine());
		int[] arr = new int[n];
		for(int i=0; i<n; i++) {
			arr[i] = Integer.parseInt(br.readLine());
		}
		Arrays.sort(arr);
		int sum = 0;
		
		int i=0;
		while(i<n && arr[i]<0) {
			if(i+1<n && (arr[i+1]<0 || arr[i+1]==0)) {
				sum+=arr[i]*arr[i+1];
				i+=2;
			}else {
				sum+=arr[i];
				i++;
			}
		}
		
		i = n-1;
		while(i>=0 && arr[i]>0) {
		    if(i-1>=0 && arr[i-1]>0 && arr[i-1]!=1) {
	    		sum += arr[i]*arr[i-1];
	    	    i-=2;
		    }else {
		    	sum+=arr[i];
		    	i--;
		    }
		}
		
		System.out.println(sum);
		
	}

}

```

